[{"/Users/bryan/Documents/opensource/defiance/client/src/App.js":"1","/Users/bryan/Documents/opensource/defiance/client/src/components/ticktacktoe.js":"2","/Users/bryan/Documents/opensource/defiance/client/src/assets/MapContainer.js":"3","/Users/bryan/Documents/opensource/defiance/client/src/pages/Home.js":"4","/Users/bryan/Documents/opensource/defiance/client/src/assets/DynamicDriverList.js":"5","/Users/bryan/Documents/opensource/defiance/client/src/pages/MissionControl.js":"6","/Users/bryan/Documents/opensource/defiance/client/src/components/store-list/store-list.component.jsx":"7","/Users/bryan/Documents/opensource/defiance/client/src/components/store-item/store-item.component.jsx":"8","/Users/bryan/Documents/opensource/defiance/client/src/index.js":"9","/Users/bryan/Documents/opensource/defiance/client/src/assets/SocketStatus.js":"10"},{"size":2071,"mtime":1608704325012,"results":"11","hashOfConfig":"12"},{"size":5245,"mtime":1608668916713,"results":"13","hashOfConfig":"12"},{"size":2178,"mtime":1608668916712,"results":"14","hashOfConfig":"12"},{"size":857,"mtime":1608668916714,"results":"15","hashOfConfig":"12"},{"size":1120,"mtime":1608671560795,"results":"16","hashOfConfig":"12"},{"size":2462,"mtime":1608697389402,"results":"17","hashOfConfig":"12"},{"size":693,"mtime":1608698062377,"results":"18","hashOfConfig":"12"},{"size":459,"mtime":1608699349416,"results":"19","hashOfConfig":"12"},{"size":606,"mtime":1608704081428,"results":"20","hashOfConfig":"12"},{"size":1496,"mtime":1608668916712,"results":"21","hashOfConfig":"12"},{"filePath":"22","messages":"23","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},"1j062yk",{"filePath":"24","messages":"25","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"26"},{"filePath":"27","messages":"28","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"29","usedDeprecatedRules":"30"},{"filePath":"31","messages":"32","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"33","messages":"34","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"35","messages":"36","errorCount":0,"warningCount":3,"fixableErrorCount":0,"fixableWarningCount":0,"source":"37","usedDeprecatedRules":"38"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"30"},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"45","messages":"46","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"30"},"/Users/bryan/Documents/opensource/defiance/client/src/App.js",["48","49","50"],"/Users/bryan/Documents/opensource/defiance/client/src/components/ticktacktoe.js",[],["51","52"],"/Users/bryan/Documents/opensource/defiance/client/src/assets/MapContainer.js",["53"],"import React, { useState, useEffect } from 'react'\nimport { GoogleMap, LoadScript, Marker} from '@react-google-maps/api'\n\nconst containerStyle = {\n    width: '80%',\n    height: '100%'\n};\n\nconst defaultCenter = {\n    lat: 26.27260777215995, \n    lng: -80.27339459701001,\n}\n\nexport default function MapContainer (props) {\n\n    const [ map, setMap ] = useState(null)\n    const [ zoom, setZoom ] = useState(15)\n    const [ center, setCenter ] = useState({\n        lat: 26.27260777215995, \n        lng: -80.27339459701001,\n    })\n    const [ driverMarkers, setDriverMarkers ] = useState([])\n\n    useEffect(() => {\n        if(props.store.location){\n            setCenter(props.store.location)\n            setZoom(14)\n        }else{\n            setCenter(defaultCenter)\n            setZoom(12)\n        }\n\n    }, [props.store])\n\n    useEffect(()=>{\n\n        const markers = []\n        props.drivers.forEach(driver=>{\n            if(driver.position){\n                markers.push(\n                    <Marker\n                        key= {driver._id} \n                        label={driver.firstName}\n                        position={{\n                            lat:driver.position.coords.latitude, \n                            lng: driver.position.coords.longitude}}\n                        onPositionChanged={()=>{console.log('position changed')}}\n                    />\n                )\n            }\n        })\n        setDriverMarkers(markers)\n\n    }, [props.drivers])\n\n    \n    const onLoad = React.useCallback(function callback(map) {\n        const bounds = new window.google.maps.LatLngBounds();\n        map.fitBounds(bounds)\n        setMap(map)\n    }, [])\n\n    const onUnmount = React.useCallback(function callback(map){\n        setMap(null)\n    }, [])\n    \n    return (\n        <LoadScript googleMapsApiKey={process.env.REACT_APP_google_map_api}>\n            <GoogleMap\n                mapContainerStyle={containerStyle}\n                center={center}\n                zoom={zoom}\n                onLoad={onLoad}\n                onUnmount={onUnmount}\n            >\n            {driverMarkers ? driverMarkers : null}\n\n            </GoogleMap>\n        </LoadScript>\n    );\n}\n",["54","55"],"/Users/bryan/Documents/opensource/defiance/client/src/pages/Home.js",[],"/Users/bryan/Documents/opensource/defiance/client/src/assets/DynamicDriverList.js",[],"/Users/bryan/Documents/opensource/defiance/client/src/pages/MissionControl.js",["56","57","58"],"import React, { useState, useEffect } from \"react\";\n\nimport MapContainer from \"../assets/MapContainer\";\nimport SocketStatus from \"../assets/SocketStatus\";\nimport DynamicDriverList from \"../assets/DynamicDriverList\";\n\nimport StoreList from \"../components/store-list/store-list.component\";\n\nimport \"../style/MissionControl.css\";\n\nexport default function MissionControl() {\n  const [users, setUsers] = useState();\n  const [activeDrivers, setActiveDrivers] = useState([]);\n\n  const [drivers, setDrivers] = useState([]); // this one most generate the driver element that can be manipulated seperatly\n\n  const [position, setPosition] = useState({});\n\n  const [loadSocket, setLoadSocket] = useState(false);\n\n  const [store, setStore] = useState({ store: {} });\n  console.log(process.env.REACT_APP_endpoint);\n  useEffect(() => {\n    getUsers().then((res) => {\n      setUsers(res);\n    });\n  }, []);\n\n  useEffect(() => {\n    const driverList = [];\n\n    activeDrivers.forEach((driver) => {\n      users.forEach((user) => {\n        if (user.employeeId === driver.id) {\n          driverList.push(user);\n        }\n      });\n    });\n\n    setDrivers(driverList);\n\n    //dynamic driver elements\n  }, [activeDrivers]);\n\n  useEffect(() => {\n    let positions = drivers.map((driver) => {\n      if (driver.employeeId === position.id) {\n        driver.position = position.position;\n      }\n      return driver;\n    });\n    setDrivers(positions);\n  }, [position]);\n\n  return (\n    <div className=\"body\">\n      <div className=\"map\">\n        {/* <MapContainer store={store.store} drivers={drivers} /> */}\n        {loadSocket ? (\n          <SocketStatus\n            store={store}\n            handleConnect={handleStore}\n            setActiveDrivers={setActiveDrivers}\n            setPosition={setPosition}\n          />\n        ) : null}\n\n        {loadSocket ? (\n          <DynamicDriverList drivers={drivers} />\n        ) : (\n          <StoreList handleConnect={handleStore} />\n        )}\n      </div>\n\n      <div className=\"bottom-bar\">bottom bar</div>\n    </div>\n  );\n\n  function handleStore(i) {\n    setStore({ store: { name: i.name, id: i.number, location: i.location } });\n    setLoadSocket((prevState) => !prevState);\n  }\n}\n\nasync function getUsers() {\n  return await fetch(process.env.REACT_APP_endpoint + \"/api/users\")\n    .then((res) => res.json())\n    .then((result) => {\n      return result;\n    })\n    .catch((error) => {\n      console.log(\"fetch error: \" + error);\n    });\n}\n",["59","60"],"/Users/bryan/Documents/opensource/defiance/client/src/components/store-list/store-list.component.jsx",[],"/Users/bryan/Documents/opensource/defiance/client/src/components/store-item/store-item.component.jsx",[],"/Users/bryan/Documents/opensource/defiance/client/src/index.js",[],"/Users/bryan/Documents/opensource/defiance/client/src/assets/SocketStatus.js",["61"],"import React, {useState, useEffect} from 'react'\nimport io from 'socket.io-client'\nimport '../style/socket-status.css'\n\nexport default function SocketStatus (props) {\n\n    const [ socket, setSocket ] = useState()\n    \n    useEffect(() => {\n        const socket = io(process.env.REACT_APP_endpoint)\n        setSocket(socket)\n\n        socket.on('connect',()=>{\n\n            socket.emit('new-user', {id: 'mission-control', room: 'Royal Palm', ms: true})\n            //on disconnect update from logged in drivers\n        })\n\n        socket.on('current-users', (data)=>{\n            const drivers = []\n\n            Object.values(data.users).forEach((id)=>{\n                drivers.push({id})\n            })\n\n            props.setActiveDrivers(drivers)\n        })\n\n        //on disconnect update\n        \n\n        socket.on('d-position', (position, id)=>{\n\n            props.setPosition({id, position})\n\n            // add on transmition stop event\n        })\n\n        return ()=>{ socket.disconnect() }\n\n    }, [props.store])\n\n\n   return(\n       <div className=\"socket-status\">\n        <div>\n            <h3 className=\"store-name\">{props.store.name}</h3>\n            <button onClick={props.handleConnect}>DISCONNECT</button>\n            <p>socket server: {process.env.REACT_APP_endpoint}</p>\n            <button onClick={()=>handleMessage(socket, props.store.name)}>send message</button>\n        </div>\n       </div>\n   )\n\n   function handleMessage(socket, store) {\n       socket.send('Royal')\n   }\n}\n",{"ruleId":"62","severity":1,"message":"63","line":1,"column":17,"nodeType":"64","messageId":"65","endLine":1,"endColumn":25},{"ruleId":"62","severity":1,"message":"66","line":5,"column":27,"nodeType":"64","messageId":"65","endLine":5,"endColumn":33},{"ruleId":"62","severity":1,"message":"67","line":5,"column":50,"nodeType":"64","messageId":"65","endLine":5,"endColumn":54},{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","replacedBy":"71"},{"ruleId":"62","severity":1,"message":"72","line":16,"column":13,"nodeType":"64","messageId":"65","endLine":16,"endColumn":16},{"ruleId":"68","replacedBy":"73"},{"ruleId":"70","replacedBy":"74"},{"ruleId":"62","severity":1,"message":"75","line":3,"column":8,"nodeType":"64","messageId":"65","endLine":3,"endColumn":20},{"ruleId":"76","severity":1,"message":"77","line":43,"column":6,"nodeType":"78","endLine":43,"endColumn":21,"suggestions":"79"},{"ruleId":"76","severity":1,"message":"80","line":53,"column":6,"nodeType":"78","endLine":53,"endColumn":16,"suggestions":"81"},{"ruleId":"68","replacedBy":"82"},{"ruleId":"70","replacedBy":"83"},{"ruleId":"76","severity":1,"message":"84","line":41,"column":8,"nodeType":"78","endLine":41,"endColumn":21,"suggestions":"85"},"no-unused-vars","'useState' is defined but never used.","Identifier","unusedVar","'Router' is defined but never used.","'Link' is defined but never used.","no-native-reassign",["86"],"no-negated-in-lhs",["87"],"'map' is assigned a value but never used.",["86"],["87"],"'MapContainer' is defined but never used.","react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'users'. Either include it or remove the dependency array.","ArrayExpression",["88"],"React Hook useEffect has a missing dependency: 'drivers'. Either include it or remove the dependency array.",["89"],["86"],["87"],"React Hook useEffect has a missing dependency: 'props'. Either include it or remove the dependency array. However, 'props' will change when *any* prop changes, so the preferred fix is to destructure the 'props' object outside of the useEffect call and refer to those specific props inside useEffect.",["90"],"no-global-assign","no-unsafe-negation",{"desc":"91","fix":"92"},{"desc":"93","fix":"94"},{"desc":"95","fix":"96"},"Update the dependencies array to be: [activeDrivers, users]",{"range":"97","text":"98"},"Update the dependencies array to be: [drivers, position]",{"range":"99","text":"100"},"Update the dependencies array to be: [props, props.store]",{"range":"101","text":"102"},[1183,1198],"[activeDrivers, users]",[1429,1439],"[drivers, position]",[1006,1019],"[props, props.store]"]